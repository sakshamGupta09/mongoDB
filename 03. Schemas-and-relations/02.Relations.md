# Relations

- How to store related data?
- There are some entities that are related in our application.
- Should we use embedded documents or refrence to some other documnet in some other collection.


## Embedding

- Lets say we have a `users` collection and their `fav books` as embedded array.
- In this case there will be lots of duplication at user level as multiple `users` can have same `favourite books`.
- Also, later if we update a book, thet needs to be updated at multiple places at user level.


## Storing references

- Insted of storing all the data at user level, we just store the id of their favourite books.
- But when I query users, I also want full details of their favourite books, not just the book ID.

## Modelling One to one relationship

- Generally for 1 to 1 relationships, we use embedding as there is no duplication.
- But lets say for analytics purpose, we have to split our data across two collections.
- In this case depending on what makes more sense, we can store reference of some document into some document from other collection.


## Modelling One to many relationship

- Here it actually depends on the rlationship betweentwo entities.
- If we have post and comments or Question and answers of a QNA, we might use embedding as there is no chance of duplication.
- Also, we cannot hit the limit of 16MB per document.
- Sometimes, we are just interested in listing one collection and not interested in the embedded one. Like city an dit's citizens.
- In this case references makes more sense.

## When to use which approach

- If there is a strong one to one relationship, we should use embedding as there will be no duplication of data and we can get all the result in just one query.
