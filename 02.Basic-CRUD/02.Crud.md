# CRUD Operations


## Database

```js
show dbs
```
- This will list all the databases present in the server.


```ts
use dbName
```

- We can switch to a database using `use` command followed by the name of the db we want to switch to.
- We can even switch to dbs which do not exist yet. They will be created on the fly. We need to add data to this db for it to be created,


## Collections

- A database will have many collections.
- We use `db` keyword to reference to current database.
- Then we mention the `collection` name we want to interact with. If the collection does not exists in the DB, it will be created on the fly.



## Create

```ts
db.collectionName.insertOne(document, options)
```

- This will insert one document in the collection.
- The document we pass is of the JSON format.
- For every document inserted, mongo will create a unique `_id` field that has a unique value across a collection like a primary key.


```ts
db.collectionName.insertMany(Array of documents, options)
```

- This will insert many documents into a collection.

## JSON VS BSON

- `mongoDB` uses `BSON` format to store data in the database. Inside the DB, data is stored in `BSON` format.
- We always deal with `JSON` data. We pass `JSON` format while inserting documents and also while reading data we get `JSON`.
- So, how will the `JSON` data gets transformed to `BSON` data and gets stored.
- The conversion is done by mongo drivers.


## Read

```ts
db.collection.find(filters, options)
```

```ts
db.collections.findOne(filter, options)
```

- `find` returns a cursor object and not all the data. We can use some methods of that cursor object.
- By default cursor returns first 20 documents in a collection.
- Filters is an object that contains key value pairs.
- It's an AND operation if filter object has multiple properties.
- We can do equality check as well as use operators like comparison, logical etc.

## Update

```ts
db.collection.updateOne(filter, data, options)
```

```ts
db.collection.updateMany(filter, data, options)
```

- We can update an existing document by either updating value, adding new key value pair or removing an entry.
- We always use `$set` to update a document. If we just pass a document without `$set` it throws an error.
- It either updates the value of existing key or adds a new one.

```ts
db.collection.updateOne({}, { $set: {} })
```

```ts
db.collection.update(filter, data, options)
```
- It accepts a document and overrides the existing one with a new one.

```ts
db.collection.ReplaceOne(filter, data, options)
```
- Similar to how `update` works. It will replace the existing document with a new one that is provided.

## Delete

```ts
db.collection.deleteOne(filter, options)
```


```ts
db.collection.deleteMany(filter, options)
```

- To delete documents from a collection, we first need to identify what documents should be deleted.
- That is defined using a filter object.
- If we pass an empty onject as a filter, it will delete all documents.
